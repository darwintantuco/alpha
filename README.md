# alpha

[![Build Status](https://travis-ci.org/dcrtantuco/alpha.svg?branch=master)](https://travis-ci.org/dcrtantuco/alpha)

Setting up a rails project takes at least one day to configure. This is my attempt to make it as fast as possible.

All files generated by rails are preserved.

Changes are made by injecting code snippets to generated files.

## tl;dr

- Webpacker Setup with React
- Essential yarn packages
- [hamlit](https://github.com/k0kubun/hamlit) as templating language
- Rspec Test Suite
- Preconfigured Linters

## Getting Started

### Requirements

- ruby >= 2.6.0
- rails >= 5.2
- nodejs >= 10.15.1
- yarn

### Optional

- asdf

### Basic Usage

```
rails new appname \
  -m https://raw.githubusercontent.com/dcrtantuco/alpha/master/template.rb
```

### Recommended Usage

```
rails new appname \
  --database=postgresql \
  --skip-test \
  --skip-turbolinks \
  --skip-coffee \
  --asdf \
  --webpack \
  -m https://raw.githubusercontent.com/dcrtantuco/alpha/master/template.rb
```

#### Custom Flags

|  Flag  | Description |
| :----: | :---------: |
| --asdf |             |

### Webpacker Setup

#### Folder Structure

```
├── app
├── channels
├── assets
├── channels
├── javascript
│   ├── css
│   │   ├── components
│   │   │   └── home-page.scss
│   │   ├── application.scss
│   │   └── vendor.scss
│   ├── images
│   │   ├── application.js
│   │   └── rails-logo.svg
│   ├── js
│   │   └── application.js
│   ├── packs
│   │   └── application.js
│   └── react
│       ├── application.js
│       └── Greeter.js
├── jobs
└── mailers
```

### React

- Added packages:
  - react
  - react-dom
  - babel-preset-react
  - remount
- Working greeter component

### Essential packages

- sanitize.css

### Rspec Test Suite

Includes rspec and other gems useful in testing.

|           Gem            | Description |
| :----------------------: | :---------: |
|    factory_bot_rails     |             |
| rails-controller-testing |             |
|       rspec-rails        |             |
|         rubocop          |             |
|      rubocop-rspec       |             |
|         capybara         |             |
|   chromedriver-helper    |             |
|     database_cleaner     |             |
|          faker           |             |
|    selenium-webdriver    |             |

### Preconfigured Linters

- Rubocop
- Eslint
- Prettier
- Stylelint

### Yarn Scripts

|         Command         |               Description                |
| :---------------------: | :--------------------------------------: |
|   yarn run lint:ruby    |                 rubocop                  |
|    yarn run lint:js     |                  eslint                  |
|    yarn run lint:css    |                stylelint                 |
| yarn run prettier:check |             prettier-eslint              |
|  yarn run prettier:fix  |             prettier-eslint              |
|    yarn run lint:ci     | rubocop eslint stylelint prettier-eslint |

## Post Install Guide

### Convert existing erb files to haml

1. Install html2haml

   ```
   $ gem install html2haml
   ```

1. Convert erb files to haml (keeps original file)

   ```
   $ find . -name \*.erb -print | sed 'p;s/.erb$/.haml/' | xargs -n2 html2haml
   ```

1. Delete existing erb files

   ```
   $ find . -name \*.erb | xargs git rm
   ```

1. Commit the changes.
1. Uninstall

   ```
   $ gem uninstall html2haml
   ```

## License

MIT
